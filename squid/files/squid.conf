htcp_port SQUID_HTCP_PORT
icp_port SQUID_ICP_PORT 
http_port SQUID_PROXY_PORT

auth_param basic program /usr/lib/squid3/basic_ncsa_auth /etc/squid3/users
auth_param basic realm proxy
acl authenticated proxy_auth REQUIRED

acl rfc3330 src 0.0.0.0/8 10.0.0.0/8 127.0.0.0/8 169.254.0.0/16 172.16.0.0/12 192.168.0.0/16 224.0.0.0/4 240.0.0.0/4
acl SSL_ports port 443
acl Safe_ports port 80
acl Safe_ports port 21
acl Safe_ports port 443
acl Safe_ports port 70
acl Safe_ports port 210
acl Safe_ports port 280
acl Safe_ports port 488
acl Safe_ports port 591
acl Safe_ports port 777
acl Safe_ports port 1025-65535
acl CONNECT method CONNECT
cache_effective_group SQUID_EFFECTIVE_USER
cache_effective_user SQUID_EFFECTIVE_USER
cache_mgr SQUID_EMAIL_ADMIN
cachemgr_passwd SQUID_CACHEMGR_PASSWD

http_access allow rfc1918 authenticated
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
request_header_access From deny all
request_header_access Referer deny all
request_header_access User-Agent deny all


workers 5
cache_dir aufs /var/spool/squid/cache0 10240 128 128 min-size=32769
cache_dir aufs /var/spool/squid/cache1 10240 128 128 min-size=32769
visible_hostname squid.example.com
access_log stdio:/var/log/squid/squid.access.log
cache_log /var/log/squid/squid.cache.log
cache_store_log stdio:/var/log/squid/squid.store.log

debug_options ALL,1
err_html_text SQUID_ERROR_TEXT
mail_from SQUID_EMAIL_FROMADDRESS
maximum_object_size	4096 KB
maximum_object_size_in_memory 4096 KB
memory_cache_mode always
memory_cache_shared on

cache_peer multicast multicast 4002 SQUID_HTCP_PORT htcp

logformat custom_with_totaltime   %>a %[ui %[un [%tl] "%rm %ru HTTP/%rv" %>Hs %<st "%{Referer}>h" "%{User-Agent}>h" %Ss:%Sh [http::]<tt

refresh_pattern .		0	20%	4320
refresh_pattern ^ftp:		1440	20%	10080
refresh_pattern ^gopher:	1440	0%	1440
refresh_pattern -i (/cgi-bin/|\?) 0	0%	0
refresh_pattern (Release|Packages(.gz)*)$      0       20%     4320

